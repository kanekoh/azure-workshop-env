#!/bin/bash
# Azure/ARO Environment Variables
# Copy this file to env.sh and fill in your values

# Azure Authentication (Service Principal)
# Option 1: Use Red Hat Demo Platform (RHDP) variable names (recommended for RHDP users)
# Just copy-paste from RHDP environment:
export CLIENT_ID="your-client-id"
export PASSWORD="your-client-secret"
export TENANT="your-tenant-id-or-domain"  # Can be tenant ID (GUID) or domain name (e.g., redhat0.onmicrosoft.com)
export SUBSCRIPTION="your-subscription-id"
export RESOURCEGROUP="your-resource-group-name"
export GUID="your-guid"  # Optional: GUID for resource naming

# Option 2: Use ARM_* variable names (alternative)
# export ARM_SUBSCRIPTION_ID="your-subscription-id"
# export ARM_TENANT_ID="your-tenant-id"
# export ARM_CLIENT_ID="your-client-id"
# export ARM_CLIENT_SECRET="your-client-secret"

# Option 3: Use Azure CLI (az login)
# If using Azure CLI, the above variables are not required
# Just run: az login

# Azure Resource Configuration
# Note: RESOURCEGROUP (from RHDP) will be automatically mapped to AZURE_RESOURCE_GROUP
export AZURE_RESOURCE_GROUP="${RESOURCEGROUP:-aro-rg}"
export AZURE_REGION="eastus" 
export AZURE_VNET_NAME="aro-vnet"

# ARO RP Service Principal (optional: auto-resolve via Azure CLI)
# If unset, deploy.sh will try to resolve it from Azure AD.
# export ARO_RP_CLIENT_ID="$(az ad sp list --filter \"displayName eq 'Azure Red Hat OpenShift RP'\" --query \"[0].appId\" -o tsv)"

# ARO Cluster Configuration
# Note: You can use GUID in cluster name if needed: export ARO_CLUSTER_NAME="mta-aro-${GUID}"
export ARO_CLUSTER_NAME="aro-cluster-$GUID"
export ARO_OCP_VERSION="4.19.20"  # OpenShift version in x.y.z format (e.g., 4.19.20)
export ARO_MASTER_VM_SIZE="Standard_D8s_v3"
export ARO_WORKER_VM_SIZE="Standard_D4s_v3"
export ARO_WORKER_COUNT=3
export ARO_POD_CIDR="10.128.0.0/14"
export ARO_SERVICE_CIDR="172.30.0.0/16"

# Optional: Custom domain for cluster
# export ARO_DOMAIN=""

# Optional: Red Hat Pull Secret (for accessing Red Hat container images and OperatorHub)
Option 1: Specify path to pull secret file (recommended)
export ARO_PULL_SECRET_FILE="$HOME/pull-secret.txt"
# Option 2: Specify pull secret content directly (not recommended for security)
# export ARO_PULL_SECRET="$(cat $HOME/pull-secret.txt)"

# GitOps Configuration
export GITOPS_ENV="mta_aro"

# Ansible Configuration
export RUN_ANSIBLE="true"

# OpenShift Admin User (for HTPasswd IDP)
export OCP_ADMIN_USER="admin"
export OCP_ADMIN_PASSWORD=""

# Workshop Users (comma-separated list)
export WORKSHOP_USERS="user1,user2,user3"
